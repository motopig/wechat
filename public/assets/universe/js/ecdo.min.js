if("undefined"===typeof jQuery)throw Error("Ecdo JavaScript requires jQuery");(function(b){b=b.fn.jquery.split(" ")[0].split(".");if(2>b[0]&&9>b[1]||1==b[0]&&9==b[1]&&1>b[2])throw Error("Ecdo JavaScript requires jQuery version 1.9.1 or higher");})(jQuery);if("undefined"===typeof jQuery.fn.modal)throw Error("Ecdo JavaScript requires bootstrap.modal");
(function(b){b=b.fn.modal.Constructor.VERSION.split(" ")[0].split(".");if(4>b[0]&&3>b[1]||3==b[0]&&3==b[1]&&2>b[2])throw Error("Ecdo JavaScript requires bootstrap.modal version 3.3.2 or higher");})(jQuery);
(function(b){var l=function(){this.version="1.0";this.title="EJsF";this.description="ECDO's Javascript Framework.";this.csrf="";var c=this;this.g={};this.obj={};this.obj.mdl=null;this.fn={getCsrf:function(){""===c.csrf&&(0<b(".hellCsrfToken").length?c.csrf=b(".hellCsrfToken").attr("csrfToken"):0<b("input[name='csrf_token']").length&&(c.csrf=b("input[name='csrf_token']").val()));return c.csrf},getForm:function(a){var c={};0<b("#"+a).length?c=b("#"+a):0<b("."+a).length&&(c=b("."+a));return c},getFormParams:function(){var a=
"";if(0===arguments.length)return a;var b=c.fn.getForm(arguments[0]);return 1>b.lenght?a:a=b.serialize()},getBaseUrl:function(){var a="",b=window.location.pathname,c=[],a=window.location.protocol+"//"+window.location.host,c=b.split("/");2<c.length&&"public"===c[2]&&(a+="/"+c[1]+"/"+c[2]);0<arguments.length&&"boolean"===typeof arguments[0]&&arguments[0]&&(a+="/");return a},bolt:function(){var a={url:"",type:"GET",data:"csrf_token="+c.csrf};0<arguments.length&&"string"===typeof arguments[0]&&""!==arguments[0]&&
(a.url=c.fn.getBaseUrl(!0)+arguments[0]);1<arguments.length&&"string"===typeof arguments[1]&&(-1<arguments[1].indexOf("csrf_token")?a.data=arguments[1]:a.data+="&"+arguments[1]);if(2<arguments.length&&"boolean"===typeof arguments[2]&&arguments[2]||"string"===typeof arguments[2]&&"post"===arguments[2].toLowerCase())a.type="POST";if(3<arguments.length&&"object"===typeof arguments[3]){var e=arguments[3];"function"===typeof e.beforeSend&&(a.beforeSend=e.beforeSend);"function"===typeof e.error&&(a.error=
e.error);"function"===typeof e.dataFilter&&(a.dataFilter=e.dataFilter);"function"===typeof e.success&&(a.success=e.success);"function"===typeof e.complete&&(a.complete=e.complete)}b.ajax(a)},elBolt:function(a){var e="",h=null,g=null,f={},d=b(a);"undefined"!==typeof d.attr("bolt-url")&&(e=d.attr("bolt-url"));"undefined"!==typeof d.attr("bolt-post")&&"true"===d.attr("bolt-post").toLowerCase()&&(g="POST");"undefined"!==typeof d.attr("bolt-data")&&""!==d.attr("bolt-data")?h=d.attr("bolt-data"):"undefined"!==
typeof d.attr("bolt-form")&&""!==d.attr("bolt-form")&&(h=c.fn.getFormParams(d.attr("bolt-form")),a=c.fn.getForm(d.attr("bolt-form")),0<a.length&&""===e&&(e=a.attr("action")),0<a.length&&null===g&&(g=a.attr("method")));if("undefined"!==typeof d.attr("bolt-modal")){null!==c.obj.mdl&&c.obj.mdl.destroy();c.obj.mdl=new c.cls.Modal;a=d.attr("bolt-modal");var k=!0;"undefined"!==typeof d.attr("bolt-modal-size")&&"small"===d.attr("bolt-modal-size").toLowerCase()&&(k=!1);"undefined"!==typeof d.attr("bolt-modal-apply")?
(c.obj.mdl.btnApply.on=!0,""!==d.attr("bolt-modal-apply")&&(c.obj.mdl.btnApply.html=d.attr("bolt-modal-apply"))):"undefined"!==typeof d.attr("bolt-modal-applyclose")&&(c.obj.mdl.btnApply.on=!0,c.obj.mdl.btnApply.close=!0,""!==d.attr("bolt-modal-applyclose")&&(c.obj.mdl.btnApply.html=d.attr("bolt-modal-applyclose")));"undefined"!==typeof d.attr("bolt-modal-close")&&(c.obj.mdl.btnClose.on=!0,""!==d.attr("bolt-modal-close")&&(c.obj.mdl.btnClose.html=d.attr("bolt-modal-close")));c.obj.mdl.init(a,k);f.success=
function(a){c.obj.mdl.setBody(a);"undefined"!==typeof d.attr("bolt-modal-form")&&""!==d.attr("bolt-modal-form")&&b(c.obj.mdl.footer.obj).find(".btn-primary").click(function(){var a=d.attr("bolt-modal-form"),e=null;0<b("#"+a).length?e=b("#"+a):0<b("."+a).length&&(e=b("."+a));if(null!==e){var f=e.attr("action"),e=e.attr("method"),a=c.fn.getFormParams(a);c.fn.bolt(f,a,e)}});c.obj.mdl.show()}}"undefined"!==typeof d.attr("bolt-func-beforeSend")&&(f.beforeSend=window[d.attr("bolt-func-beforeSend")]||c.g[d.attr("bolt-func-beforeSend")]);
"undefined"!==typeof d.attr("bolt-func-error")&&(f.error=window[d.attr("bolt-func-error")]||c.g[d.attr("bolt-func-error")]);"undefined"!==typeof d.attr("bolt-func-dataFilter")&&(f.dataFilter=window[d.attr("bolt-func-dataFilter")]||c.g[d.attr("bolt-func-dataFilter")]);"undefined"!==typeof d.attr("bolt-func-success")&&(f.success=window[d.attr("bolt-func-success")]||c.g[d.attr("bolt-func-success")]);"undefined"!==typeof d.attr("bolt-func-complete")&&(f.complete=window[d.attr("bolt-func-complete")]||
c.g[d.attr("bolt-func-complete")]);c.fn.bolt(e,h,g,f)},initBolt:function(){b("body").on("click",".boltClick",function(){c.fn.elBolt(this)});b("body").on("mouseenter",".boltMouseenter",function(){c.fn.elBolt(this)});b("body").on("mouseleave",".boltMouseleave",function(){c.fn.elBolt(this)});b("body").on("blur",".boltBlur",function(){c.fn.elBolt(this)});b("body").on("focus",".boltFocus",function(){c.fn.elBolt(this)})},regFunc:function(a,b){if("string"!==typeof a||""===a||"function"!==typeof b)return!1;
c.g[a]=b}};this.cls={};this.cls.Modal=function(){this.animation=!0;this.options={backdrop:!0,keyboard:!0,show:!1};this.obj=null;this.skeleton={"class":[],html:"",id:""};this.dialog={obj:null,"class":[],html:"",large:!0};this.content={obj:null,"class":[],html:""};this.header={obj:null,"class":[],html:""};this.title={obj:null,el:"h4",html:""};this.body={obj:null,"class":[],html:""};this.footer={obj:null,"class":[],html:'\u00a9 \u4e91\u5ba2 \u7531<a href="http://www.no/" target="_blank" title="ECDO was the e-Commerce Driver.">ECDO</a>\u9a71\u52a8\u652f\u6301',
btn:[]};this.btnApply={obj:null,on:!1,close:!1,html:""};this.btnClose={obj:null,on:!1,close:!0,html:""};this.buildSkeleton=function(){null!==this.obj&&this.obj.remove();this.obj=b("<div>",{"class":"modal"});this.animation&&this.obj.addClass("fade");0<this.skeleton["class"].length&&this.obj.addClass(this.skeleton["class"].join(" "));""!==this.skeleton.id&&this.obj.attr("id",this.skeleton.id);""!==this.skeleton.html&&this.obj.html(this.skeleton.html)};this.buildDialog=function(){null!==this.dialog.obj&&
this.dialog.obj.remove();this.dialog.obj=b("<div>",{"class":"modal-dialog"});this.dialog.obj.appendTo(this.obj);this.dialog.large?this.dialog.obj.addClass("modal-lg"):this.dialog.obj.addClass("modal-sm");0<this.dialog["class"].length&&this.dialog.obj.addClass(this.dialog["class"].join(" "));""!==this.dialog.html&&this.dialog.obj.html(this.dialog.html)};this.buildContent=function(){null!==this.content.obj&&this.content.obj.remove();this.content.obj=b("<div>",{"class":"modal-content"});this.content.obj.appendTo(this.dialog.obj);
0<this.content["class"].length&&this.content.obj.addClass(this.content["class"].join(" "));""!==this.content.html&&this.content.obj.html(this.content.html)};this.buildTitle=function(){null!==this.title.obj&&this.title.obj.remove();this.title.obj=b("<"+this.title.el+">",{"class":"modal-title",html:"\u6a21\u6001\u7a97"});this.title.obj.appendTo(this.header.obj);""!==this.title.html&&this.title.obj.html(this.title.html)};this.buildHeader=function(){null!==this.header.obj&&this.header.obj.remove();this.header.obj=
b("<div>",{"class":"modal-header"});this.header.obj.prependTo(this.content.obj);0<this.header["class"].length&&this.header.obj.addClass(this.header["class"].join(" "));if(""!==this.header.html)this.header.obj.html(this.header.html);else{var a=b("<button>",{type:"button","class":"close","data-dismiss":"modal","aria-label":"Close"});a.appendTo(this.header.obj);tmpObj=b("<span>",{"aria-hidden":"true",html:"&times;"});tmpObj.appendTo(a);this.buildTitle()}};this.buildBody=function(){null!==this.body.obj&&
this.body.obj.remove();this.body.obj=b("<div>",{"class":"modal-body"});this.body.obj.insertAfter(this.header.obj);0<this.body["class"].length&&this.body.obj.addClass(this.body["class"].join(" "));this.body.obj.html(this.body.html)};this.buildFooter=function(){null!==this.footer.obj&&this.footer.obj.remove();this.footer.obj=b("<div>",{"class":"modal-footer"});this.footer.obj.appendTo(this.content.obj);0<this.footer["class"].length&&this.footer.obj.addClass(this.footer["class"].join(" "));if(""!==this.footer.html)this.footer.obj.html(this.footer.html),
this.footer.obj.css({"text-align":"center"});else{if(this.btnApply.on){var a=b("<button>",{type:"button","class":"btn btn-primary",html:"\u5e94\u7528"});""!==this.btnApply.html&&a.html(this.btnApply.html);this.btnApply.close&&a.attr("data-dismiss","modal");a.appendTo(this.footer.obj)}this.btnClose.on&&(a=b("<button>",{type:"button","class":"btn btn-default",html:"\u5173\u95ed"}),""!==this.btnClose.html&&a.html(this.btnClose.html),this.btnClose.close&&a.attr("data-dismiss","modal"),a.appendTo(this.footer.obj));
0<this.footer.btn.length&&b.each(this.footer.btn,function(){this.appendTo(this.footer.obj)})}};this.construct=function(){var a=!0;this.buildSkeleton();""!==this.skeleton.html&&(a=!1);a&&(this.buildDialog(),""!==this.dialog.html&&(a=!1));a&&(this.buildContent(),""!==this.content.html&&(a=!1));a&&(this.buildHeader(),this.buildBody(),this.buildFooter())};this.setOptions=function(){if(0<arguments.length&&"object"===typeof arguments[0]){var a=arguments[0];"boolean"===typeof a.backdrop&&(this.options.backdrop=
a.backdrop);"boolean"===typeof a.keyboard&&(this.options.keyboard=a.keyboard);"boolean"===typeof a.show&&(this.options.show=a.show)}null!==this.obj&&this.obj.modal(this.options)};this.init=function(){0<arguments.length&&""!==arguments[0]&&(this.title.html=arguments[0]);1<arguments.length&&!1===arguments[1]&&(this.dialog.large=!1);2<arguments.length&&!1===arguments[2]&&(this.animation=!1);this.construct();this.setOptions()};this.setTtl=function(){if(0===arguments.length)throw Error("Function needs at least 1 argument TITLE!");
1<arguments.length&&(this.title.el=arguments[1]);this.title.html=arguments[0];this.buildTitle()};this.setBody=function(a){this.body.html=a;this.buildBody()};this.toggle=function(){null!==this.obj&&this.obj.modal("toggle")};this.show=function(){null!==this.obj&&this.obj.modal("show")};this.hide=function(){null!==this.obj&&this.obj.modal("hide")};this.destroy=function(){this.obj.remove();this.obj=null}}};"undefined"!==typeof b.hell&&b.hell||(b.hell=new l);b(document).ready(function(){b.hell.fn.getCsrf();
b.hell.fn.initBolt()})})(jQuery);
